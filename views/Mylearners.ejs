<%- include("header") -%>
<head>
  <link rel="apple-touch-icon" href="/docs/5.2/assets/img/favicons/apple-touch-icon.png" sizes="180x180">
  <link rel="icon" href="/docs/5.2/assets/img/favicons/favicon-32x32.png" sizes="32x32" type="image/png">
  <link rel="icon" href="/docs/5.2/assets/img/favicons/favicon-16x16.png" sizes="16x16" type="image/png">
  <link rel="manifest" href="/docs/5.2/assets/img/favicons/manifest.json">
  <link rel="mask-icon" href="/docs/5.2/assets/img/favicons/safari-pinned-tab.svg" color="#712cf9">
  <link rel="icon" href="/docs/5.2/assets/img/favicons/favicon.ico">
  <meta name="theme-color" content="#712cf9">
  <link rel="stylesheet" href="style.css">
  <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.7.2/css/all.css" integrity="sha384-fnmOCqbTlWIlj8LyTjo7mOUStjsKC4pOpQbqyi7RrhN7udi9RwhKkMHpvLbHG9Sr" crossorigin="anonymous">
  <link rel="stylesheet" href="public/css/style.css">
  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/css/bootstrap.min.css">
  <script src="https://code.jquery.com/jquery-3.2.1.slim.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.12.9/umd/popper.min.js"></script>
  <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/js/bootstrap.min.js"></script>
  
<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-GLhlTQ8iRABdZLl6O3oVMWSktQOp6b7In1Zl3/Jr59b6EGGoI1aFkw7cmDA6j6gD" crossorigin="anonymous">


</head>


<section aria-colspan="main">


  <!doctype html>
  <html lang="en">

    <head>
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width, initial-scale=1">
      <meta name="description" content="">
      <meta name="author" content="Mark Otto, Jacob Thornton, and Bootstrap contributors">
      <meta name="generator" content="Hugo 0.104.2">
      <title>SYGE</title>
  
      <link rel="canonical" href="https://getbootstrap.com/docs/5.2/examples/dashboard/">
      <link rel="stylesheet" href="style.css">
  
      <link rel="stylesheet" href="public/css/style.css">
      
  
      
  
      <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-GLhlTQ8iRABdZLl6O3oVMWSktQOp6b7In1Zl3/Jr59b6EGGoI1aFkw7cmDA6j6gD" crossorigin="anonymous">
  
      <!-- Favicons -->
 
  
      
      <!-- Custom styles for this template -->
      <link href="style.css" rel="stylesheet">
    </head>
    <body>
      
      <nav class="topNavcolor navbar navbar-expand-lg ">
        <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#sidebarMenu" aria-controls="sidebarMenu" aria-expanded="false" aria-label="Toggle navigation">
          <span class="navbar-toggler-icon"></span>
        </button>
        
      
        <div class="collapse navbar-collapse" id="navbarTogglerDemo03">
          <ul class="navbar-nav mr-auto mt-2 mt-lg-0">
            <li class="nav-item">
              <a class="nav-link" href="#"  style="color: aliceblue; font-weight:400">SmartConnect</a>
            </li>
            <li class="nav-item">
          
            </li>
          </ul>
       
        </div>
      </nav>
  
  <div class="container-fluid">
    <div class="row">
      <nav id="sidebarMenu" class="col-md-3 col-lg-2 d-md-block bg-light sidebar collapse">
        <div class="position-sticky pt-1 sidebar-sticky sideM">
          <ul class="nav flex-column">
            <h6 class="sidebar-heading d-flex justify-content-between align-items-center px-3 mt-4 mb-1 text-muted text-uppercase">


              <% Teacher.forEach(function(item) { %>
              <span><img class="TeacherPro2" src="<%= item.teacher_profile_picture %>" style="margin-bottom:10px;margin-left:7%;" alt=""></span> 
              <% }); %>
              
              <a class="link-secondary" href="#" aria-label="Add a new report">
                <span data-feather="plus-circle" class="align-text-bottom"></span>
              </a>
            </h6>
            <li class="nav-item ">
              <a class="nav-link" aria-current="page" href="/dashboard.html">
                <span data-feather="home" class="align-text-bottom"></span>
                Dashboard
              </a>
            </li>
           
            <li class="nav-item">

              <a class="nav-link active" href="/Mylearner.html">
                <span data-feather="file" class="align-text-bottom"></span>
                My Learners
              
              </a>
            </li>
            <li class="nav-item">
              <a class="nav-link" href="/Mygrades.html">
                <span data-feather="shopping-cart" class="align-text-bottom"></span>
                My Subjects
              </a>
            </li>
            <li class="nav-item">
              <a class="nav-link" href="/LeavedaysAdmin.html">
                <span data-feather="users" class="align-text-bottom"></span>
                Library
              </a>
            </li>

            <li class="nav-item">
              <a class="nav-link" href="/PayrollCommits.html">
                <span data-feather="users" class="align-text-bottom"></span>
                Payroll Reports
              </a>
            </li>
          </ul>
  
        </div>
      </nav>
 
  
  
      <main class="col-md-9 ms-sm-auto col-lg-10 px-md-4">
        <div class="d-flex justify-content-between flex-wrap flex-md-nowrap align-items-center pt-3 pb-2 mb-3 border-bottom">
          <h1 class="h2">My Learners</h1>
         
            </button>
          <div class="btn-toolbar mb-2 mb-md-0">
              
            <div class="btn-group me-2">
      
                 
          
              
              <button type="button" class="btn btn-sm btn-dark"> Welcome <% Teacher.forEach(function(item) { %>           
                <span><%= item.title %></span>   <span><%= item.first_name %></span>  <span><%= item.last_name %></span> </h5>
                        <% }); %></button>
            </div>
        
          </div>
        </div>
        <div class="row">
          <div class="EmployeesHeader col-8">Learners</div>
          <div class="col-4"><form class="form-inline" action="/search" method="post" >
            <div class="input-group">
              <label for="search-input" class="sr-only">Search</label>
              <input type="text" id="search-input" class="form-control" name="searchQueryName" placeholder="Search" autocomplete="on" required>
              <div class="input-group-append">
                <button class="btn btn-dark" type="submit" aria-label="Search">
                  <i class="fas fa-search"></i>
                </button>
              </div>
            </div>
          </form>
          
          
          
          </div>
        </div>

        <table class="table table-striped">
          <thead class="bg-dark">
            <tr>
              <th class="textheader">Profile Picture</th>
              <th class="textheader">Student Number</th>
              <th class="textheader">First Name</th>
              <th class="textheader">Last Name</th>
              <th class="textheader">Grade</th>
              <th class="textheader">Action</th>
              <th class="textheader">Status</th>
            </tr>
          </thead>
          <tbody>
            <% TeacherLwithR.forEach(function(item) { %>
              <tr>
                <td>
                  <img class="ProfileP"  src="<%= item.teacher_profile_picture %> alt=">
                </td>
                <td class="textpadding"  style="vertical-align: middle;"><%= item.StudentNumber %></td>
                <td class="textpadding"  style="vertical-align: middle;"><%= item.first_name %></td>
                <td class="textpadding"  style="vertical-align: middle;"><%= item.last_name %></td>
                <td class="textpadding"  style="vertical-align: middle;"><%= item.GradeID %></td>
                <td class="textpadding"  style="vertical-align: middle;">
                  <div  class="row">
                    <div class="col-4"> <button type="button" class="btn btn-success" data-toggle="modal" data-target="#editModal<%= item._id %>">About</button></div>
                    <div class="col-4"> <form action="/delete" method="post">
                     
                    </form></div>
                  </div>
                 
                 
                </td>
   
                  <td style="vertical-align: middle;">
                    <% item.OnlineTest.forEach(function(testObj) { %>
                      <% if (testObj.Mark >= 80) { %>
                        <button type="button" class="btn btn-outline-success" data-toggle="modal" style="Display:none" data-target="#popup<%= item._id %>" >Mark: <%= testObj.Mark %> (Excellent)</button>
                      <% } else if (testObj.Mark >= 50) { %>
                        <button type="button" class="btn btn-outline-warning" data-toggle="modal" style="Display:none"  data-target="#popup<%= item._id %>">Mark: <%= testObj.Mark %> (Good)</button>
                      <% } else { %>
                        <button type="button" class="btn btn-outline-danger" data-toggle="modal" style="Display:none" data-target="#popup<%= item._id %>" >Mark: <%= testObj.Mark %> (Bad)</button>
                      <% } %>
                    <% }); %>
                    
                    <% let totalMarks = 0; %>
                    <% let marksCount = 0; %>
                    <% item.OnlineTest.forEach(function(testObj) { %>
                      <% if (testObj.Mark) { %>
                        <% totalMarks += testObj.Mark; %>
                        <% marksCount++; %>
                      <% } %>
                    <% }); %>
                    
                    <% if (marksCount > 0) { %>
                      <% let averageMark = totalMarks / marksCount; %>
                      <% if (averageMark >= 80) { %>
                        <span class="badge badge-pill badge-success" data-toggle="modal" data-target="#popup<%= item._id %>">Average: <%= averageMark %> (Excellent)</span>
                      <% } else if (averageMark >= 50) { %>
                        <span class="badge badge-pill badge-warning" data-toggle="modal" data-target="#popup<%= item._id %>">Average: <%= averageMark %> (Good)</span>
                      <% } else { %>
                        <span class="badge badge-pill badge-danger"data-toggle="modal" data-target="#popup<%= item._id %>">Average: <%= averageMark %> (Bad)</span>
                      <% } %>
                    <% } %>
                  </td>
              </tr>

              
              <style>
                .modal-dialog {
                    margin: 0%;
                    position: absolute;
                    top: 0%;
                    left: 30%;
                    transform: none;
                    width: 100%;
                    height: 100%;
                    
                    
                }.modal-body{
                  height: 700px;
                }
                
            </style>
              <!-- Modal -->
              <% item.OnlineTest.forEach(function(testObj) { %>
              <div class="modal fade" id="popup<%= item._id %>" tabindex="-1" role="dialog" aria-labelledby="popup<%= item._id %>Label" aria-hidden="true">
                <div class="modal-dialog modal-dialog-centered modal-lg" role="document">
                  <div class="modal-content">
                    <div class="modal-header">

                      <button type="button" class="btn btn-dark" data-dismiss="modal" aria-label="Close"> Close
                        <span aria-hidden="true">&times;</span>
                      </button>
                    </div>
                    
                    <div class="modal-body">
                      <!-- Nav tabs -->
                        <ul class="nav nav-tabs" role="tablist">
                          <li class="nav-item">
                            <a class="nav-link active"  data-toggle="tab" href="#TestMarkInfo_<%= item._id %>" role="tab">Leaner Test Infor</a>
                          </li>
                    
                        </ul>
                        <!-- Tab panes -->
                      <div class="tab-content">
                        <div class="border border-dark tab-pane active" id="TestMarkInfo_<%= item._id %>" role="tabpanel">
                          <div class="row">
                            <div class="col-12" style="text-align: start;margin: 2%;" >
                      
                               
                                  <% item.OnlineTest.forEach(function(testObj) { %>
                                    <div class="row">
                                      <div class="col-sm-8">
                                        Subject: <%= testObj.Subject_Test %>
                                        <%= testObj.TestName %>
                                      </div>
                                      <div class="col-sm-4">
                                        Mark: <%= testObj.Mark %>
                                      
                                      </div>
                                    </div>
                         
                             
                               
                                   
                                  
                                  <% }); %>
                                  <% let totalMarks = 0; %>
                                  <% let marksCount = 0; %>
                                  <% item.OnlineTest.forEach(function(testObj) { %>
                                    <% if (testObj.Mark) { %>
                                      <% totalMarks += testObj.Mark; %>
                                      <% marksCount++; %>
                                    <% } %>
                                  <% }); %>
                                  
                                  <% if (marksCount > 0) { %>
                                    <% let averageMark = totalMarks / marksCount; %>
                                    <% if (averageMark >= 80) { %>
                                      <span class="badge badge-pill badge-success" style="margin: 2%;Display:none" data-toggle="modal" data-target="#popup<%= item._id %>">Average: <%= averageMark %> (Excellent)</span>
                                    <% } else if (averageMark >= 50) { %>
                                      <span class="badge badge-pill badge-warning" style="margin: 2%;"data-toggle="modal" data-target="#popup<%= item._id %>">Average: <%= averageMark %> (Good)</span>
                                    <% } else { %>
                                      <span class="badge badge-pill badge-danger" style="margin: 2%;" data-toggle="modal" data-target="#popup<%= item._id %>">Average: <%= averageMark %> (Bad)</span>
                                    <% } %>
                                  <% } %>
                                
                               
                              </span> </p>
                            </div>
                          </div>
                        </div>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
              <% }); %>
              <div class="modal fade" id="editModal<%= item._id %>" tabindex="-1" role="dialog" aria-labelledby="popup<%= item._id %>Label" aria-hidden="true">
                <div class="modal-dialog modal-dialog-centered modal-lg"  role="document">
                  <div class="modal-content">
                    <div class="modal-header">
                      <h5 class="modal-title" id="editModalLabel">Edit Employee Details</h5>
                      <button type="button" class="btn btn-danger" data-dismiss="modal" aria-label="Close"> Close
                        <span aria-hidden="true">&times;</span>
                      </button>
                    </div>
                    <div class="modal-body">

                    
                      
                      
                      <ul class="nav nav-tabs" id="myTab" role="tablist">
                        <li class="nav-item">

                          <a class="nav-link active" id="EmIn-tab" data-toggle="tab" href="#LeanerIn_<%= item._id %>" role="tab" aria-controls="EmIn" aria-selected="true">Learner's Info</a>
                        </li>
                        <li class="nav-item">
                          <a class="nav-link" id="Employment-tab" data-toggle="tab" href="#Guardian_<%= item._id %>" role="tab" aria-controls="Employment" aria-selected="false">Guardian Info</a>
                        </li>
                        
                      
                       
                      </ul>
                      
                      <div class="tab-content" id="myTabContent">
                        <div class="tab-pane fade show active"  id="LeanerIn_<%= item._id %>" role="tabpanel" aria-labelledby="home-tab">
                      
                    
                          <div class="row">
                            <div class="col-3">
                              <img class="ProfileP6" data-toggle="modal" data-target="#popup<%= item._id %>" src="<%= item.teacher_profile_picture %> alt=" alt="">
                            </div>
                          
                            <div class="col-3"><h5 class="modal-title" id="popup<%= item._id %>Label" style="text-align: start; padding-top: 10%;"> </h5></div>
                            <div class="col-6">
                           
                              <ul class="list-group" style="vertical-align: 50%;">
                                  <li class="list-group-item d-flex justify-content-between align-items-center">
                                   <h6>Full Name:</h6> 
                                    <p class="btn btn-dark">
                                      <span> </span>  <span class="basic-allowance-input" >
                                        <%= item.title %>  <%= item.first_name %> <%= item.last_name %>
                                      </span>
                                  </li>
                                </ul>
                              </div>                        
                            </div>
                            <div class="row">
                              <div class="col-6">
                                <ul class="list-group" style="vertical-align: 50%;">
                                  <li class="list-group-item d-flex justify-content-between align-items-center">
                                   <h6>Gender:</h6> 
                                    <p class="btn btn-dark">
                                      <span class="madical-aid-input" name="MedicalAid" ><%= item.Gender %></span>
                                  </p>
                                  </li>
                                </ul>
                            </div>
                                <div class="col-6">
                                  <ul class="list-group" style="vertical-align: 50%;">
                                    <li class="list-group-item d-flex justify-content-between align-items-center">
                                     <h6>Age: </h6> 
                                      <p class="btn btn-dark">
                                      <span class="fines-input" name="Finess" ><%= item.age %></span>
                                    </li>
                                  </ul>
                                </div>
                            </div>
                            <div class="row">
                              
                              <div class="col-6">
                                <ul class="list-group" style="vertical-align: 50%;">
                                  <li class="list-group-item d-flex justify-content-between align-items-center">
                                    <h6> Home Address: </h6> 
                                   
                                    <p class="btn btn-dark">
                                      <span class="basic-after-tax-input" name="EmployeeBasicAfterTax" ><%= item.home_address %></span>
                                    </p>
                                  </li>
                                </ul>
                              </div>
                              <div class="col-6">
                                <ul class="list-group" style="vertical-align: 50%;">
                                <li class="list-group-item d-flex justify-content-between align-items-center">
                                  <h6>Email Address: </h6> 
                                 
                                  <p class="btn btn-dark">
                                    <span class="basic-after-tax-input" name="EmployeeBasicAfterTax" ><%= item.email_address %></span>
                                  </p>
                                </li>
                              </ul>
                              </div>
                          </div>
                          <div class="row">
                            <div class="col-6">
                            
                              <ul class="list-group" style="vertical-align: 50%;">
                                <li class="list-group-item d-flex justify-content-between align-items-center">
                                  <h6> Student Number: </h6> 
                                  <p class="btn btn-dark">
                                    <span>R </span><span class="UIF-input" name="UIFF" ><%= item.StudentNumber %></span>
                                  </p>
                                </li>
                              </ul>
                          </div>
                              <div class="col-6">
                              </div> 
                          </div>
                            <input type="hidden" name="id" value="<%= item._id %>">
                            <div class="modal-footer">
                                <!-- <button type="button" class="btn btn-danger" data-dismiss="modal">Close</button>   -->
                            </div>





                        
                        </div>
                        <div class="tab-pane fade" id="Guardian_<%= item._id %>" role="tabpanel" aria-labelledby="profile-tab">
                                   
                          <div class="row">
                            <div class="col-3">
                              <img class="ProfileP6" data-toggle="modal" data-target="#popup<%= item._id %>" src="<%= item.teacher_profile_picture %> alt=" alt="">
                            </div>
                           
                            <div class="col-3"><h5 class="modal-title" id="popup<%= item._id %>Label" style="text-align: start; padding-top: 10%;"> </h5></div>
                            <div class="col-6">
                           
                              <ul class="list-group" style="vertical-align: 50%;">
                                <li class="list-group-item d-flex justify-content-between align-items-center">
                                 <h6>Guardian Full Name:</h6> 
                                  <p class="btn btn-dark">
                                    <span> </span>  <span class="basic-allowance-input" >
                                 

                                      <%= item.Gadian_title %>  <%= item.Gandian_First_Name %> <%= item.Gdian_Lat_Name %>



                                    </span>
                                  
                                </li>
                              </ul>

                            </div>
                          
                          </div>
                          <div class="row">
                            <div class="col-6">
                              <ul class="list-group" style="vertical-align: 50%;">
                                <li class="list-group-item d-flex justify-content-between align-items-center">
                                 <h6>Guardian Contact Details:</h6> 
                                  <p class="btn btn-dark">
                                    <span class="madical-aid-input" name="MedicalAid" ><%= item.Gadiane_Contacts %></span>
                                    
                                </p>
                                </li>
                              </ul>
                          </div>
                              <div class="col-6">
                                <ul class="list-group" style="vertical-align: 50%;">
                                  <li class="list-group-item d-flex justify-content-between align-items-center">
                                    <h6>Guardian Home Address: </h6> 
                                   
                                    <p class="btn btn-dark">
                                      <span class="basic-after-tax-input" name="EmployeeBasicAfterTax" ><%= item.Gadian_Home_address %></span>
                                    </p>
                                  </li>
                                </ul>
                              </div>
                          </div>
                          <div class="row">
                            
                            <div class="col-6">
                              <ul class="list-group" style="vertical-align: 50%;">
                                <li class="list-group-item d-flex justify-content-between align-items-center">
                                  <h6>Guardian Email Address: </h6> 
                                 
                                  <p class="btn btn-dark">
                                    <span class="basic-after-tax-input" name="EmployeeBasicAfterTax" ><%= item.Gadian_email %></span>
                                  </p>
                                </li>
                              </ul>
                            </div>
                            <div class="col-6">
                           
                            </div>
                        </div>
                        <div class="row">
                          <div class="col-6">
                          
                          
                            
                        </div>
                            <div class="col-6">
                              
                            </div> 
                           
                        </div>

                       
                          <input type="hidden" name="id" value="<%= item._id %>">
                          <div class="modal-footer">
                              <!-- <button type="button" class="btn btn-danger" data-dismiss="modal">Close</button> -->
                              
                          </div>
                        
                        </div>
                      </div>
              </div>
        

              
                    </div>    
                  </div>
                </div>
            <% }); %>
          </tbody>
          
        </table>
 
        <!-- Modal dialog -->
        <script src="/js/script.js"></script>
         </body>
      
      


<!-- Main content -->




  

 <!-- this below is for connectinf the pages -->
 



</html>